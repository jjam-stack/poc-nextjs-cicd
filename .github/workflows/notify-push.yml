name: Notify on Feature/Hotfix/Bugfix Push

on:
  push:
    branches:
      - "feature/*"
      - "hotfix/*"
      - "bugfix/*"

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send notification to ClickUp Chat
        run: |
          curl -X POST "https://api.clickup.com/api/v3/workspaces/${{ secrets.CLICKUP_TEAM_ID }}/chat/channels/${{ secrets.CLICKUP_ROOM_ID }}/messages" \
          -H "Authorization: ${{ secrets.CLICKUP_API_TOKEN }}" \
          -H "Content-Type: application/json" \
          -d '{
            "type": "message",
            "post_data": {
              "subtype": {
                "id": "458876",
                "name": "Update"
              },
              "title": "ğŸ“Œ Push Detected"
            },
            "content": "ğŸ“Œ **Push Detected**\n\nğŸ“¦ **Repository:** ${{ github.repository }}\nğŸŒ± **Branch:** ${{ github.ref_name }}\nğŸ“ **Commit:** ${{ github.sha }}\nğŸ‘¤ **Pushed by:** ${{ github.actor }}\n\nğŸ”— [View Commit](${{ github.server_url }}/${{ github.repository }}/commit/${{ github.sha }})"
          }'
